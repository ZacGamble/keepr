import{G as f,u as y,E as b,c as r,M as K,a as k,o as i,b as c,d as e,t as u,n as w,F as _,s as x,e as C}from"./vendor.8e439640.js";import{_ as I,v,b as M,l as g,P as d,A as l,k as B}from"./index.12e2f398.js";const P={setup(){const o=f(),n=y();return b(async()=>{try{await v.getById(o.params.id),await M.getKeepsByVaultId(o.params.id)}catch(a){n.push({name:"Home"}),g.error(a),d.toast("You were not invited.","error")}}),{route:o,router:n,vaultKeeps:r(()=>l.vaultKeeps),keepsInVault:r(()=>l.vaultKeeps.length),activeVault:r(()=>l.activeVault),account:r(()=>l.account),async deleteVault(){try{await d.confirm()&&(await v.deleteVault(o.params.id),n.push({name:"Home"}),d.toast("Your vault has been permanantly destroyed."))}catch(a){g.error(a),d.toast(a.message,"error")}},async openVaultKeepModal(a){l.activeKeep=a,K.getOrCreateInstance(document.getElementById("vaultkeep-modal")).show(),await B.incrementViews()}}}},S={class:"d-flex justify-content-between"},j={class:"flex-column p-3"},E={class:"my-3"},N={class:"my-3 fw-bold"},A={key:0,class:"p-4"},D={class:"masonry-container"},F={class:"vaultkeep"},H=["onClick","src","title"],O={class:"d-flex justify-content-between",style:{height:"0px"}},R={class:"keep-name"},Y=["onClick","src","title"];function G(o,n,a,s,L,T){var p,m;const h=k("VaultKeepModal");return i(),c(_,null,[e("div",S,[e("div",j,[e("h1",E,u((p=s.activeVault)==null?void 0:p.name),1),e("div",N,"Keeps in this vault: "+u(s.keepsInVault),1)]),((m=s.activeVault)==null?void 0:m.creatorId)==s.account.id?(i(),c("div",A,[e("button",{class:"btn btn-outline-danger",onClick:n[0]||(n[0]=t=>s.deleteVault())}," Delete Vault ")])):w("",!0)]),e("div",D,[(i(!0),c(_,null,x(s.vaultKeeps,t=>(i(),c("div",{class:"keep-container",key:t.id},[e("div",F,[e("img",{onClick:V=>s.openVaultKeepModal(t),src:t.img,alt:"keep image",class:"img-fluid img-custom",title:"Open "+t.name+" details"},null,8,H),e("div",O,[e("h2",R,u(t.name),1),e("img",{onClick:V=>o.goToProfile(t.creator.id),src:t.creator.picture,alt:"profile image",class:"thumbnail-img selectable",title:"Visit profile of "+t.creator.name},null,8,Y)])])]))),128))]),C(h)],64)}var J=I(P,[["render",G],["__scopeId","data-v-57dbead8"]]);export{J as default};
